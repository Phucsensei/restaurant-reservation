{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Reversation/reservation/client/src/app/login/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport Image from 'next/image'\r\nimport React, { useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport { assets } from '../assets/assets'\r\nimport { authService } from '@/services/auth.service'\r\nimport { useAuth } from '@/contexts/auth.context'\r\nimport toast from 'react-hot-toast'\r\n\r\nconst LoginPage = () => {\r\n    const router = useRouter()\r\n    const { login } = useAuth()\r\n    const [isSignUp, setIsSignUp] = useState(false)\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n    const [error, setError] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setError('')\r\n        setLoading(true)\r\n\r\n        const loginPromise = authService.login({ email, password })\r\n            .then(response => {\r\n                const token = response.accessToken\r\n                const tokenData = JSON.parse(atob(token.split('.')[1]))\r\n                login({\r\n                    email: tokenData.email,\r\n                    id: tokenData.sub,\r\n                    name: tokenData.name || tokenData.email\r\n                })\r\n\r\n                router.push('/')\r\n                return 'Đăng nhập thành công!'\r\n            })\r\n            .catch(err => {\r\n                const errorMessage = err instanceof Error ? err.message : 'Đăng nhập thất bại'\r\n                setError(errorMessage)\r\n                throw new Error(errorMessage)\r\n            })\r\n            .finally(() => {\r\n                setLoading(false)\r\n            })\r\n\r\n        toast.promise(loginPromise, {\r\n            loading: 'Đang đăng nhập...',\r\n            success: (message) => message,\r\n            error: (err) => err.message\r\n        })\r\n    }\r\n\r\n    const handleRegister = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setError('')\r\n\r\n        if (password !== confirmPassword) {\r\n            setError('Mật khẩu không khớp')\r\n            toast.error('Mật khẩu không khớp')\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n        const registerPromise = authService.register({ email, password, confirmPassword })\r\n            .then(() => {\r\n                setIsSignUp(false)\r\n                setError('')\r\n                return 'Đăng ký thành công! Vui lòng đăng nhập.'\r\n            })\r\n            .catch(err => {\r\n                const errorMessage = err instanceof Error ? err.message : 'Đăng ký thất bại'\r\n                setError(errorMessage)\r\n                throw new Error(errorMessage)\r\n            })\r\n            .finally(() => {\r\n                setLoading(false)\r\n            })\r\n\r\n        toast.promise(registerPromise, {\r\n            loading: 'Đang đăng ký...',\r\n            success: (message) => message,\r\n            error: (err) => err.message\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex h-screen w-full bg-white\">\r\n            <div className=\"w-full hidden md:inline-block relative\">\r\n                <Image className=\"h-full w-full object-cover\" src={assets.restaurant_desert} alt=\"leftSideImage\" />\r\n\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent\"></div>\r\n\r\n                <div className=\"absolute top-1/2 left-8 transform -translate-y-1/2 text-white max-w-sm\">\r\n                    <h1 className=\"text-xl md:text-4xl font-bold mb-4 leading-normal\">\r\n                        Fresh & Healthy\r\n                    </h1>\r\n                    <p className=\"text-lg text-white/90 mb-6 leading-relaxed\">\r\n                        Experience the finest culinary journey with our premium restaurant services\r\n                    </p>\r\n                </div>\r\n                <div className=\"absolute top-8 right-8\">\r\n                    <div className=\"w-16 h-16 border-2 border-white/30 rounded-full flex items-center justify-center\">\r\n                        <svg className=\"w-8 h-8 text-white/80\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n                        </svg>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"w-full flex flex-col items-center justify-center\">\r\n                <Link href=\"/\" className=\"mb-8\">\r\n                    <Image src={assets.logo} alt=\"logo\" className=\"h-8 w-auto\" />\r\n                </Link>\r\n                <form onSubmit={isSignUp ? handleRegister : handleLogin} className=\"md:w-96 w-80 flex flex-col items-center justify-center\">\r\n                    <h2 className=\"text-5xl text-gray-900 font-semibold \">\r\n                        {isSignUp ? 'Sign up' : 'Sign in'}\r\n                    </h2>\r\n                    <p className=\"text-sm text-gray-500/90 mt-3\">\r\n                        {isSignUp\r\n                            ? 'Create a new account to get started'\r\n                            : 'Welcome back! Please sign in to continue'}\r\n                    </p>\r\n\r\n                    {error && (\r\n                        <div className=\"w-full mt-4 p-3 bg-red-50 border border-red-100 text-red-500 text-sm rounded-lg\">\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"flex items-center gap-4 w-full my-5\">\r\n                        <div className=\"w-full h-px bg-gray-300/90\"></div>\r\n                        <p className=\"w-full text-nowrap text-sm text-gray-500/90\">\r\n                            {isSignUp ? 'sign up with email' : 'or sign in with email'}\r\n                        </p>\r\n                        <div className=\"w-full h-px bg-gray-300/90\"></div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center w-full bg-transparent border border-gray-300/60 h-12 rounded-full overflow-hidden pl-6 gap-2\">\r\n                        <svg width=\"16\" height=\"11\" viewBox=\"0 0 16 11\" fill=\"none\">\r\n                            <path fillRule=\"evenodd\" clipRule=\"evenodd\"\r\n                                d=\"M0 .55.571 0H15.43l.57.55v9.9l-.571.55H.57L0 10.45zm1.143 1.138V9.9h13.714V1.69l-6.503 4.8h-.697zM13.749 1.1H2.25L8 5.356z\"\r\n                                fill=\"#6B7280\" />\r\n                        </svg>\r\n                        <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            placeholder=\"Email\"\r\n                            className=\"bg-transparent text-gray-500/80 placeholder-gray-500/80 outline-none text-sm w-full h-full\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center mt-6 w-full bg-transparent border border-gray-300/60 h-12 rounded-full overflow-hidden pl-6 gap-2\">\r\n                        <svg width=\"13\" height=\"17\" viewBox=\"0 0 13 17\" fill=\"none\">\r\n                            <path d=\"M13 8.5c0-.938-.729-1.7-1.625-1.7h-.812V4.25C10.563 1.907 8.74 0 6.5 0S2.438 1.907 2.438 4.25V6.8h-.813C.729 6.8 0 7.562 0 8.5v6.8c0 .938.729 1.7 1.625 1.7h9.75c.896 0 1.625-.762 1.625-1.7zM4.063 4.25c0-1.406 1.093-2.55 2.437-2.55s2.438 1.144 2.438 2.55V6.8H4.061z\"\r\n                                fill=\"#6B7280\" />\r\n                        </svg>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            placeholder=\"Password\"\r\n                            className=\"bg-transparent text-gray-500/80 placeholder-gray-500/80 outline-none text-sm w-full h-full\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    {isSignUp && (\r\n                        <div className=\"flex items-center mt-6 w-full bg-transparent border border-gray-300/60 h-12 rounded-full overflow-hidden pl-6 gap-2\">\r\n                            <svg width=\"13\" height=\"17\" viewBox=\"0 0 13 17\" fill=\"none\">\r\n                                <path d=\"M13 8.5c0-.938-.729-1.7-1.625-1.7h-.812V4.25C10.563 1.907 8.74 0 6.5 0S2.438 1.907 2.438 4.25V6.8h-.813C.729 6.8 0 7.562 0 8.5v6.8c0 .938.729 1.7 1.625 1.7h9.75c.896 0 1.625-.762 1.625-1.7zM4.063 4.25c0-1.406 1.093-2.55 2.437-2.55s2.438 1.144 2.438 2.55V6.8H4.061z\"\r\n                                    fill=\"#6B7280\" />\r\n                            </svg>\r\n                            <input\r\n                                type=\"password\"\r\n                                value={confirmPassword}\r\n                                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                placeholder=\"Confirm Password\"\r\n                                className=\"bg-transparent text-gray-500/80 placeholder-gray-500/80 outline-none text-sm w-full h-full\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    {!isSignUp && (\r\n                        <div className=\"w-full flex items-center justify-between mt-8 text-gray-500/80\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <input className=\"h-5\" type=\"checkbox\" id=\"checkbox\" />\r\n                                <label className=\"text-sm\" htmlFor=\"checkbox\">Remember me</label>\r\n                            </div>\r\n                            <a className=\"text-sm underline\" href=\"#\">Forgot password?</a>\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className={`mt-8 w-full h-11 rounded-full text-white bg-indigo-500 hover:opacity-90 transition-all duration-200 flex items-center justify-center\r\n                            ${loading ? 'opacity-70 cursor-not-allowed' : ''}`}\r\n                    >\r\n                        {loading ? (\r\n                            <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                        ) : (\r\n                            isSignUp ? 'Sign up' : 'Login'\r\n                        )}\r\n                    </button>\r\n\r\n                    <p className=\"text-gray-500/90 text-sm mt-4\">\r\n                        {isSignUp\r\n                            ? <>Already have an account? <span className=\"text-indigo-400 hover:underline cursor-pointer\" onClick={() => setIsSignUp(false)}>Sign in</span></>\r\n                            : <>Don’t have an account? <span className=\"text-indigo-400 hover:underline cursor-pointer\" onClick={() => setIsSignUp(true)}>Sign up</span></>}\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginPage\r\n"],"names":[],"mappings":"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","debugId":null}}]
}